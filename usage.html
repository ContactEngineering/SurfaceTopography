<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Usage &mdash; SurfaceTopography 1.3.0.dev16+gc7dbaab1 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Testing" href="testing.html" />
    <link rel="prev" title="Installation" href="installation.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> SurfaceTopography
          </a>
              <div class="version">
                1.3.0.dev16+gc7dbaab1
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Notes</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Usage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#handling-topographies">Handling topographies</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#data-orientation">Data Orientation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#analysis-functions">Analysis functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pipelines">Pipelines</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="testing.html">Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing to SurfaceTopography</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Package Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="source/SurfaceTopography.html">SurfaceTopography package</a></li>
<li class="toctree-l1"><a class="reference internal" href="source/SurfaceTopography.Container.html">SurfaceTopography.Container package</a></li>
<li class="toctree-l1"><a class="reference internal" href="source/SurfaceTopography.Generic.html">SurfaceTopography.Generic package</a></li>
<li class="toctree-l1"><a class="reference internal" href="source/SurfaceTopography.IO.html">SurfaceTopography.IO package</a></li>
<li class="toctree-l1"><a class="reference internal" href="source/SurfaceTopography.Nonuniform.html">SurfaceTopography.Nonuniform package</a></li>
<li class="toctree-l1"><a class="reference internal" href="source/SurfaceTopography.Support.html">SurfaceTopography.Support package</a></li>
<li class="toctree-l1"><a class="reference internal" href="source/SurfaceTopography.Uniform.html">SurfaceTopography.Uniform package</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">SurfaceTopography</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a></li>
      <li class="breadcrumb-item active">Usage</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/usage.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="usage">
<h1>Usage<a class="headerlink" href="#usage" title="Permalink to this heading"></a></h1>
<p>The code is documented via Python’s documentation strings that can be accesses via the <cite>help</cite> command or by appending a questions mark <cite>?</cite> in ipython/jupyter.</p>
<section id="handling-topographies">
<h2>Handling topographies<a class="headerlink" href="#handling-topographies" title="Permalink to this heading"></a></h2>
<p><cite>SurfaceTopography</cite> is designed for handling topography data, either two-dimensional topography maps or line scan. There are three basic topography classes implemented in this module:</p>
<ul class="simple">
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">Topography</span></code> is a representation of a two-dimensional topography map that lives on a uniform grid.</p></li>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">UniformLineScan</span></code> is a representation of a one-dimensional line-scan that lives on a uniform grid.</p></li>
<li><p><code class="xref py py-class docutils literal notranslate"><span class="pre">NonuniformLineScan</span></code> is a representation of a one-dimensional line-scan that lives on a nonuniform grid. This class assumes that height information in between grid points can be obtained by a linear interpolation.</p></li>
</ul>
<p>Nonuniform line-scans are therefore always interpreted as a set of points connected by straight lines
(linear interpolation). No interpolation is carried out for topography maps and uniform line scans.</p>
<p>Topographies can be read from a file through a reader returned by <code class="xref py py-func docutils literal notranslate"><span class="pre">SurfaceTopography.open_topography()</span></code>.
Each reader provides an interface to one or more channels in the file.
Each channel returns one of the basic topography classes, depending on the structure of the data contained in the file.
The classes expose a homogeneous interface for handling topographies. Example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">SurfaceTopography</span> <span class="kn">import</span> <span class="n">open_topography</span>

<span class="c1"># get a handle to the file (&quot;reader&quot;)</span>
<span class="n">reader</span> <span class="o">=</span> <span class="n">open_topography</span><span class="p">(</span><span class="s2">&quot;example.opd&quot;</span><span class="p">)</span>   <span class="c1"># you can find this file in the folder &#39;tests/file_format_examples&#39;</span>

<span class="c1"># each file has a list of channels (one or more)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">reader</span><span class="o">.</span><span class="n">channels</span><span class="p">)</span>  <span class="c1"># returns list of channels</span>
<span class="n">ch</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">channels</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># first channel, alternatively use ..</span>
<span class="n">ch</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">default_channel</span>  <span class="c1"># .. - one of the channels is the &quot;default&quot; channel</span>

<span class="c1"># each channel has some defined meta data</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ch</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>  <span class="c1"># channel name</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ch</span><span class="o">.</span><span class="n">physical_sizes</span><span class="p">)</span>  <span class="c1"># lateral dimensions</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ch</span><span class="o">.</span><span class="n">nb_grid_pts</span><span class="p">)</span>  <span class="c1"># number of grid points</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ch</span><span class="o">.</span><span class="n">dim</span><span class="p">)</span>  <span class="c1"># number of dimensions (1 or 2)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">ch</span><span class="o">.</span><span class="n">info</span><span class="p">)</span>  <span class="c1"># more metadata, e.g. &#39;unit&#39; if unit was given in file</span>

<span class="c1"># you can get a topography from a channel</span>
<span class="n">topo</span> <span class="o">=</span> <span class="n">ch</span><span class="o">.</span><span class="n">topography</span><span class="p">()</span>   <span class="c1"># here meta data from the file is taken</span>

<span class="c1"># each topography has a rich set of methods and properties for meta data and analysis</span>
<span class="nb">print</span><span class="p">(</span><span class="n">topo</span><span class="o">.</span><span class="n">physical_sizes</span><span class="p">)</span>  <span class="c1"># lateral dimension</span>
<span class="nb">print</span><span class="p">(</span><span class="n">topo</span><span class="o">.</span><span class="n">rms_height_from_area</span><span class="p">())</span>  <span class="c1"># Root mean square of heights</span>
<span class="n">h</span> <span class="o">=</span> <span class="n">topo</span><span class="o">.</span><span class="n">heights</span><span class="p">()</span>  <span class="c1"># access to the heights array</span>
</pre></div>
</div>
<p>The raw data can be accesses via the <cite>heights</cite> method that return a one- or two-dimensional array containing height information.
The <cite>positions</cite> method contains return the corresponding positions. For two-dimensional maps, it return two array for the <cite>x</cite> and <cite>y</cite> positions.
For uniform topographies, these positions are uniformly spaced but for nonuniform topographies they may have any value.</p>
<p>Operations on topographies can be analysis functions that compute some value or property,
such as the root mean square height of the topography, or pipeline functions that compute a new topography,
e.g. a detrended one, from the current topography. Both are described in the section <a class="reference internal" href="#analysis-functions"><span class="std std-ref">Analysis functions</span></a> below.</p>
<section id="data-orientation">
<h3>Data Orientation<a class="headerlink" href="#data-orientation" title="Permalink to this heading"></a></h3>
<p>When working with 2D topographies it is useful to know, how the data in <cite>SurfaceTopography</cite> is oriented,
also when compared against the expected image.</p>
<p>After loading a topography, e.g. by</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">SurfaceTopography</span> <span class="kn">import</span> <span class="n">open_topography</span>
<span class="n">reader</span> <span class="o">=</span> <span class="n">open_topography</span><span class="p">(</span><span class="s2">&quot;example.opd&quot;</span><span class="p">)</span>   <span class="c1"># you can find this file in the folder &#39;tests/file_format_examples&#39;</span>
<span class="n">topo</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">topography</span><span class="p">()</span>  <span class="c1"># returns the default channel</span>
</pre></div>
</div>
<p>the heights array can be accessed by</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">topo</span><span class="o">.</span><span class="n">heights</span><span class="p">()</span>
</pre></div>
</div>
<p>or if you need also the coordinates of the heights, use</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">topo</span><span class="o">.</span><span class="n">positions_and_heights</span><span class="p">()</span>
</pre></div>
</div>
<p>If matplotlib has been installed, these heights can be plotted by</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="n">plt</span><span class="o">.</span><span class="n">pcolormesh</span><span class="p">(</span><span class="n">topo</span><span class="o">.</span><span class="n">heights</span><span class="p">()</span><span class="o">.</span><span class="n">T</span><span class="p">)</span>   <span class="c1"># only heights, axes labels are just indices</span>
<span class="c1"># or</span>
<span class="n">plt</span><span class="o">.</span><span class="n">pcolormesh</span><span class="p">(</span><span class="o">*</span><span class="n">topo</span><span class="o">.</span><span class="n">positions_and_heights</span><span class="p">())</span>   <span class="c1"># heights and coordinates, axes labels are positions</span>
</pre></div>
</div>
<p>These two variants plot the origin in the lower left, in a typical cartesian coordinate system.
If you like to have a plot of the topography as seen during measurement, similar to the output
of other software as e.g. Gwyddion, use</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">topo</span><span class="o">.</span><span class="n">heights</span><span class="p">()</span><span class="o">.</span><span class="n">T</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="analysis-functions">
<span id="id1"></span><h3>Analysis functions<a class="headerlink" href="#analysis-functions" title="Permalink to this heading"></a></h3>
<p>All topography classes implement the following analysis functions that can return scalar values or more complex properties. They can be accessed as methods of the topography classes.</p>
<ul class="simple">
<li><p><cite>mean</cite>: Compute the mean value.</p></li>
<li><p><cite>rms_height_from_area</cite>: Computes the root mean square height of the topography by integrating over the area. (This is the value known as ‘Sq’.)</p></li>
<li><p><cite>rms_height_from_profile</cite>: Computes the root mean square height of the topography as the average of the rms height of individual line scans (profiles) in x-direction. (This is the value known as ‘Rq’.)</p></li>
<li><p><cite>rms_gradient</cite>: Computes the root mean square gradient.</p></li>
<li><p><cite>rms_slope_from_profile</cite>: Computes the root mean square slope as the average of the rms slope of individual line scans (profiles) in x-direction. Note that there is a factors of sqrt(2) between this values and the rms gradient.</p></li>
<li><p><cite>rms_curvature_from_area</cite>: Computes the root mean square curvature by integrating over the area.</p></li>
<li><p><cite>rms_curvature_from_profile</cite>: Computes the root mean square curvature as the average of the rms curvature of individual line scans (profiles) in x-direction.</p></li>
<li><p><cite>power_spectrum_from_profile</cite>: Computes the one-dimensional power-spectrum (PSD). For two-dimensional topography maps, this functions returns the mean value of all PSDs across the perpendicular direction.</p></li>
<li><p><cite>power_spectrum_from_area</cite>: Only two-dimensional maps: Computes the radially averaged PSD.</p></li>
<li><p><cite>autocorrelation_from_profile</cite>: Computes the one-dimensional height difference autocorrelation function (ACF). For two-dimensional topography maps, this functions returns the mean value of all PSDs across the perpendicular direction.</p></li>
<li><p><cite>autocorrelation_from_area</cite>: Only two-dimensional maps: Computes the radially averaged height difference autocorrelation function.</p></li>
<li><p><cite>variable_bandwidth_from_profile</cite>: Computes the one-dimentional scan-size dependent rms-height using the variable bandwidth method.</p></li>
<li><p><cite>variable_bandwidth_from_area</cite>: Computes the two-dimentional scan-size dependent rms-height using the variable bandwidth method.</p></li>
</ul>
<p>Example::</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">SurfaceTopography</span> <span class="kn">import</span> <span class="n">read_topography</span>
<span class="n">topo</span> <span class="o">=</span> <span class="n">read_topography</span><span class="p">(</span><span class="s1">&#39;my_surface.opd&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;rms height (Sq) =&#39;</span><span class="p">,</span> <span class="n">topo</span><span class="o">.</span><span class="n">rms_height_from_area</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;rms gradient =&#39;</span><span class="p">,</span> <span class="n">topo</span><span class="o">.</span><span class="n">rms_gradient</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;rms curvature =&#39;</span><span class="p">,</span> <span class="n">topo</span><span class="o">.</span><span class="n">rms_curvature_from_area</span><span class="p">())</span>
</pre></div>
</div>
</section>
<section id="pipelines">
<h3>Pipelines<a class="headerlink" href="#pipelines" title="Permalink to this heading"></a></h3>
<p>Pipeline functions return a new topography.
This topography does not own the original data but executes the full pipeline everytime <cite>heights</cite> is executed.
By using the pipeline, this topography is not only a (pseudo-) height container
but also documents the whole process leading from the raw heights to the current heights.
The <cite>squeeze</cite> method returns a new topography that contains the data returned by the pipeline.
Pipelines can be concatenated together.</p>
<ul class="simple">
<li><p><cite>scale</cite>: Rescale all heights by a certain factor.</p></li>
<li><p><cite>detrend</cite>: Compute a detrended topography.</p></li>
</ul>
<p>Example::</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">SurfaceTopography</span> <span class="kn">import</span> <span class="n">read_topography</span>
<span class="n">topo</span> <span class="o">=</span> <span class="n">read_topography</span><span class="p">(</span><span class="s1">&#39;my_surface.opd&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;rms height before detrending =&#39;</span><span class="p">,</span> <span class="n">topo</span><span class="o">.</span><span class="n">rms_height_from_area</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;rms height after detrending =&#39;</span><span class="p">,</span> <span class="n">topo</span><span class="o">.</span><span class="n">detrend</span><span class="p">(</span><span class="n">detrend_mode</span><span class="o">=</span><span class="s1">&#39;curvature&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">rms_height_from_area</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;rms height after detrending and rescaling =&#39;</span><span class="p">,</span>
      <span class="n">topo</span><span class="o">.</span><span class="n">detrend</span><span class="p">(</span><span class="n">detrend_mode</span><span class="o">=</span><span class="s1">&#39;curvature&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="mf">2.0</span><span class="p">)</span><span class="o">.</span><span class="n">rms_height_from_area</span><span class="p">())</span>
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="installation.html" class="btn btn-neutral float-left" title="Installation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="testing.html" class="btn btn-neutral float-right" title="Testing" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2015-2020 The Authors.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>